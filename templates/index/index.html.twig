{% extends 'base.html.twig' %}

{% block title %}Sauvons les chouineurs !
{% endblock %}

{% block body %}

	<h1 class="mb-4 text-6xl text-center uppercase text-slate-50 font-title">Centre de sauvetage de la chouinerie</h1>

	<div class="p-4 mb-8 rounded-md bg-yellow-50">
		<div class="flex">
			<div
				class="flex-shrink-0">
				<!-- Heroicon name: solid/exclamation -->
				<svg class="w-5 h-5 text-yellow-400" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 20 20" fill="currentColor" aria-hidden="true">
					<path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
				</svg>
			</div>
			<div class="ml-3">
				<h3 class="text-sm font-medium text-yellow-800">
					Attention
				</h3>
				<div class="mt-2 text-sm text-yellow-700">
					<p>Pour le moment le site est loin d’ètre fini. Il y a de forte chance pour que les ouins ouins ne sois pas tous à jours.
					</p>
					<p>Je travaille encore sur une solution pour maintenir à jours les ouins sans bully le site de CPC.
					</p>
				</div>
			</div>
		</div>
	</div>
	<div class="mb-8">
		<h2 class="text-xs font-medium tracking-wide uppercase text-slate-200">Infos Diverses</h2>
		<ul role="list" class="grid grid-cols-1 gap-5 mt-3 sm:gap-6 sm:grid-cols-4">
			<li class="flex col-span-1 rounded-md shadow-sm">
				<div class="flex items-center justify-center flex-shrink-0 w-16 text-sm font-medium text-white bg-green-500 rounded-l-md">
					<span class="w-8 h-8 text-green-200 iconify" data-icon="pepicons:bookmark-print"></span>
				</div>
				<div class="flex items-center justify-between flex-1 truncate bg-white border-t border-b border-r border-gray-200 rounded-r-md">
					<div class="flex-1 px-4 py-2 text-sm truncate">
						<a href="#" class="font-medium text-gray-900 hover:text-gray-600">Articles Chouinés</a>
						<p class="text-gray-500">{{articlesChouineur | length}}</p>
					</div>
				</div>
			</li>

			<li class="flex col-span-1 rounded-md shadow-sm">
				<div class="flex items-center justify-center flex-shrink-0 w-16 text-sm font-medium text-white bg-pink-500 rounded-l-md">
					<span class="w-8 h-8 text-pink-200 iconify" data-icon="pepicons:megaphone-print"></span>
				</div>
				<div class="flex items-center justify-between flex-1 truncate bg-white border-t border-b border-r border-gray-200 rounded-r-md">
					<div class="flex-1 px-4 py-2 text-sm truncate">
						<a href="#" class="font-medium text-gray-900 hover:text-gray-600">Total de ouins</a>
						<p class="text-gray-500">{{nbrsChouineur}}</p>
					</div>
				</div>
			</li>

			<li class="flex col-span-1 rounded-md shadow-sm">
				<div class="flex items-center justify-center flex-shrink-0 w-16 text-sm font-medium text-white bg-sky-500 rounded-l-md">
					<span class="w-8 h-8 text-sky-200 iconify" data-icon="pepicons:info-print"></span>
				</div>
				<div class="flex items-center justify-between flex-1 truncate bg-white border-t border-b border-r border-gray-200 rounded-r-md">
					<div class="flex-1 px-4 py-2 text-sm truncate">
						<a href="#" class="font-medium text-gray-900 hover:text-gray-600">Nombre total d’article</a>
						<p class="text-gray-500">{{totalArticles}}</p>
					</div>
				</div>
			</li>

			<li class="flex col-span-1 rounded-md shadow-sm">
				<div class="flex items-center justify-center flex-shrink-0 w-16 text-sm font-medium text-white bg-lime-500 rounded-l-md">
					<span class="w-8 h-8 text-lime-200 iconify" data-icon="pepicons:trophy-print"></span>
				</div>
				<div class="flex items-center justify-between flex-1 truncate bg-white border-t border-b border-r border-gray-200 rounded-r-md">
					<div class="flex-1 px-4 py-2 text-sm truncate">
						<a href="#" class="font-medium text-gray-900 hover:text-gray-600">Articles gratuits</a>
						<p class="text-gray-500">{{articlesFree | length }}</p>
					</div>
				</div>
			</li>

			<li class="flex col-span-1 col-start-2 rounded-md shadow-sm">
				<div class="flex items-center justify-center flex-shrink-0 w-16 text-sm font-medium text-white bg-yellow-500 rounded-l-md">
					<span class="w-8 h-8 text-yellow-200 iconify" data-icon="pepicons:pinpoint-off-print"></span>
				</div>
				<div class="flex items-center justify-between flex-1 truncate bg-white border-t border-b border-r border-gray-200 rounded-r-md">
					<div class="flex-1 px-4 py-2 text-sm truncate">
						<a href="#" class="font-medium text-gray-900 hover:text-gray-600">Articles jamais scannés</a>
						<p class="text-gray-500">{{totalManquant}}</p>
					</div>
				</div>
			</li>

			<li class="flex col-span-1 rounded-md shadow-sm">
				<div class="flex items-center justify-center flex-shrink-0 w-16 text-sm font-medium text-white bg-red-500 rounded-l-md">
					<span class="w-8 h-8 text-red-200 iconify" data-icon="pepicons:electricity-print"></span>
				</div>
				<div class="flex items-center justify-between flex-1 truncate bg-white border-t border-b border-r border-gray-200 rounded-r-md">
					<div class="flex-1 px-4 py-2 text-sm truncate">
						<a href="#" class="font-medium text-gray-900 hover:text-gray-600"> Articles cassés</a>
						<p class="text-gray-500">{{totalError }}</p>
					</div>
				</div>
			</li>

		</ul>
	</div>
	<div class="px-4 mx-auto max-w-8xl sm:px-6 lg:px-8" x-data="{ tab: window.location.hash ? window.location.hash.substring(1) : 'chouineur' }" id="tab_wrapper">

		<div class="mb-4">
			<div class="sm:hidden">
				<label for="tabs" class="sr-only">Select a tab</label>
				<select x-model="tab" id="tabs" name="tabs" class="block w-full border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
					<option value="chouineur">Chouineurs</option>
					<option value="gratuit">Gratuits</option>
					<option value="aleatoire">4 articles au pif</option>
					<option value="semaine">Les Articles de la Semaine</option>
				</select>
			</div>
			<div class="hidden sm:block">
				<div class="">
					<nav class="grid justify-center grid-cols-2 gap-6 lg:flex font-title" aria-label="Tabs">
						<a :class="tab === 'chouineur' ? 'active text-pink-500 border-pink-500': 'hover:text-pink-300 hover:border-pink-300 text-slate-400'" @click.prevent="tab = 'chouineur'; window.location.hash = 'chouineur'" href="#" class="inline-flex items-center px-1 py-4 text-2xl font-semibold transition-all border-b-2 border-transparent group">
							<span class="mr-2 text-4xl iconify" data-icon="mdi:emoticon-cry"></span>
							<span class="uppercase whitespace-nowrap">Trouve un chouineur</span>
						</a>
						<a :class="tab === 'semaine' ? 'active text-orange-500 border-orange-500': 'hover:text-orange-300 hover:border-orange-300 text-slate-400'" @click.prevent="tab = 'semaine'; window.location.hash = 'semaine'" href="#" class="inline-flex items-center px-1 py-4 text-2xl font-semibold transition-all border-b-2 border-transparent group">
							<span class="mr-2 text-3xl iconify" data-icon="bi:calendar-week-fill"></span>
							<span class="uppercase whitespace-nowrap">Les Articles de la Semaine</span>
						</a>
						<a :class="tab === 'gratuit' ? 'active text-lime-500 border-lime-500': 'hover:text-lime-300 hover:border-lime-300 text-slate-400'" @click.prevent="tab = 'gratuit'; window.location.hash = 'gratuit'" href="#" class="inline-flex items-center px-1 py-4 text-2xl font-semibold transition-all border-b-2 border-transparent group">
							<span class="mr-2 text-3xl iconify" data-icon="bi:emoji-heart-eyes-fill"></span>
							<span class="uppercase whitespace-nowrap">Les gratuits</span>
						</a>
						<a :class="tab === 'aleatoire' ? 'active text-teal-500 border-teal-500': 'hover:text-teal-300 hover:border-teal-300 text-slate-400'" @click.prevent="tab = 'aleatoire'; window.location.hash = 'aleatoire'" href="#" class="inline-flex items-center px-1 py-4 text-2xl font-semibold transition-all border-b-2 border-transparent group">
							<span class="mr-2 text-4xl iconify" data-icon="ion:dice"></span>
							<span class="uppercase whitespace-nowrap">4 articles au pif</span>
						</a>
					</nav>
				</div>
			</div>
		</div>
		<div class="flex flex-col px-4 py-5 overflow-hidden shadow bg-slate-800 lg:col-span-9 sm:rounded-lg sm:px-6">
			<div x-show="tab === 'semaine'" class="">
				<h2 class="mb-8 text-4xl font-medium text-center text-orange-500 uppercase font-title mt-42">La semaine
					{{lundi| format_datetime('long', 'none', locale='fr') }}</h2>
				<ul role="list" class="grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2 sm:gap-x-6 lg:grid-cols-3 xl:grid-cols-4 xl:gap-x-8">
					{% for article in articlesDerniers %}
						<li class="relative">
							<div
								class="block w-full overflow-hidden rounded-lg shadow group aspect-w-10 aspect-h-7 focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-offset-slate-500 focus-within:ring-pink-500">
								{# {% if article.imageUrl %} #}
								<img src="{{ article.imageUrl }}" alt="{{article.title | raw}}" class="object-cover transition-all pointer-events-none group-hover:opacity-75">
								{# {% else %} #}
								{# <img src="{{ asset(article.localImage) | imagine_filter('miniatures') }}" alt="{{article.title | raw}}" class="object-cover transition-all pointer-events-none group-hover:opacity-75"> #}
								{# {% endif %}								 #}
									<a href="{{article.link}}" class="absolute inset-0 focus:outline-none"> <span class="sr-only">{{article.title | raw}}</span>
								</a>
							</div>
							<a href="{{article.link}}" class="block mt-2 text-sm font-medium truncate text-slate-300">{{article.title | raw}}</a>
							<div class="flex justify-between">
								<p class="block text-sm font-medium text-slate-400">Il y a
									{{article.chouineurs}}
									chouineur
									{% if article.chouineurs > 1 %}s
									{% endif %}
								</p>
								<p class="block text-sm font-medium text-right text-slate-400">Article du
									{{article.realCreatedAt| format_datetime('short', 'none', locale='fr') }}</p>
							</div>
						</li>
					{% endfor %}
				</ul>
			</div>
			<div x-show="tab === 'chouineur'" class="">
				<h2 class="mb-8 text-4xl font-medium text-center text-pink-500 uppercase font-title mt-42">Et sauve le !</h2>
				<ul role="list" class="grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2 sm:gap-x-6 lg:grid-cols-3 xl:grid-cols-4 xl:gap-x-8">
					{% for article in articlesChouineur %}
						<li class="relative">
							<div
								class="block w-full overflow-hidden rounded-lg shadow-lg shadow-slate-900/40 group aspect-w-10 aspect-h-7 focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-offset-slate-500 focus-within:ring-pink-500">
								{# {% if article.imageUrl %} #}
								<img src="{{ article.imageUrl }}" alt="{{article.title | raw}}" class="object-cover transition-all pointer-events-none group-hover:opacity-75">
								{# {% elseif article.localImage %} #}
								{# <img src="{{ asset(article.localImage) | imagine_filter('miniatures') }}" alt="{{article.title | raw}}" class="object-cover transition-all pointer-events-none group-hover:opacity-75"> #}
								{# {% endif %}	 #}
									<a href="{{article.link}}" class="absolute inset-0 focus:outline-none"> <span class="sr-only">{{article.title | raw}}</span>
								</a>
							</div>
							<a href="{{article.link}}" class="block mt-2 text-sm font-medium truncate text-slate-300">{{article.title | raw}}</a>
							<div class="flex justify-between">
								<p class="block text-sm font-medium text-slate-400">Il y a
									{{article.chouineurs}}
									chouineur{% if article.chouineurs > 1 %}s
									{% endif %}
								</p>
								<p class="block text-sm font-medium text-right text-slate-400">Article du
									{{article.realCreatedAt| format_datetime('short', 'none', locale='fr') }}</p>
							</div>
						</li>
					{% endfor %}
				</ul>
			</div>
			<div x-show="tab === 'gratuit'" class="">

				<h2 class="mb-8 text-4xl font-medium text-center uppercase font-title mt-42 text-lime-500">Sinon tu veux un article gratuit ?</h2>
				<ul role="list" class="grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2 sm:gap-x-6 lg:grid-cols-3 xl:grid-cols-4 xl:gap-x-8">
					{% for article in articlesFree %}
						<li class="relative">
							<div class="block w-full overflow-hidden rounded-lg shadow group aspect-w-10 aspect-h-7 focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-offset-slate-500 focus-within:ring-pink-500">
								<img src="{{article.imageUrl}}" alt="{{article.title | raw}}" class="object-cover pointer-events-none group-hover:opacity-75">
								<a href="{{article.link}}" class="absolute inset-0 focus:outline-none">
									<span class="sr-only">{{article.title | raw}}</span>
								</a>
							</div>
							<p class="block mt-2 text-sm font-medium truncate pointer-events-none text-slate-300">{{article.title | raw}}</p>
						</li>
					{% endfor %}

				</ul>
			</div>
			<div x-show="tab === 'aleatoire'" class="">
				<h2 class="mb-8 text-4xl font-medium text-center text-teal-500 uppercase font-title mt-42">Ou peut être lire un article au pif ?</h2>
				<ul role="list" class="grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2 sm:gap-x-6 lg:grid-cols-3 xl:grid-cols-4 xl:gap-x-8">
					{% for article in articlesRandom %}
						<li class="relative">
							<div class="block w-full overflow-hidden rounded-lg shadow group aspect-w-10 aspect-h-7 focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-offset-slate-500 focus-within:ring-pink-500">
								<img src="{{article.imageUrl}}" alt="{{article.title | raw}}" class="object-cover transition-all pointer-events-none group-hover:opacity-75">
								<a href="{{article.link}}" class="absolute inset-0 focus:outline-none">
									<span class="sr-only">{{article.title | raw}}</span>
								</a>
							</div>
							<a href="{{article.link}}" class="block mt-2 text-sm font-medium truncate text-slate-300">{{article.title | raw}}</a>
						</li>
					{% endfor %}

				</ul>
			</div>
		</div>
	</div>
{% endblock %}
